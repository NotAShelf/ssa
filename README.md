<div align="center">
    <img src="https://deps.rs/repo/github/notashelf/ssa/status.svg" alt="https://deps.rs/repo/github/notashelf/ssa">
    <img src="https://img.shields.io/github/stars/notashelf/ssa?label=stars&color=DEA584">
    <h1>SSA</h1>
    <p align="left">
    Simple, streamlined and ✨ pretty ✨  aggregator for the security report
    generated by <code>systemd-analyze security</code>. Simply collects data
    from JSON output and pretty-prints it for your viewing pleasure.
    Optionally, you can print the results in JSON for easier CI/CD integration.
    </p>
</div>

## Features

- Simple
- Fast (One could say... blazingly fast.)
- Pretty
- Verbose

What else do you need?

## Usage

There are four possible arguments, two of which are mandatory:

- `--top-n` -> Number of services to list for a given predicate
- `--predicate` -> Predicate for which to aggregate services

And two optional:

- `--debug` -> Print raw JSON aggregated from `systemd-analyze security`
- `--json` -> Whether to return the aggregated results in JSON for future
  parsing

### Example:

```bash
ssa --top-n 10 --predicate UNSAFE
```

This will return the **10** services marked as **UNSAFE** in the security
report. Possible predicates are:

- `"OK"`
- `"MEDIUM"`
- `"EXPOSED"`
- `"UNSAFE"`

In addition, you will be shown the average exposure (out of 10) and the average
happiness (out of 5). In addition to displaying the top N services for a given
predicate, SSA will color the exposure level output based on how exposed it is.

<div align="center">
    <p>SSA in action</p>
    <img alt="latest demo" src=".github/assets/demo.png" width="500px">
    <p>Cool, right?</p>
</div>

## Why?

Honestly, just see the next section. Long story short is that I wanted to
aggregate the results of `systemd-analyze security` for testing and NixOS VM
tests in CI.

## Contributing

[Microfetch]: https://github.com/notashelf/microfetch

For what it's worth, SSA has been created because I wanted to write a structured
bash script for parsing the output of `systemd-analyze security`. Rust came to
mind, as Serde is pretty cool and I wanted to do argument parsing - which Clap
does better than Python libs I am familiar with.

The software is very minimal. You run it, you get a bunch of lines. You might
have cooler ideas to do with aggregated data (in which case, just take a look at
the parser) or inspect the raw JSON data yourself with `--debug` passed to the
program.

If you would like to see some other features, open either an issue or a pull
request depending on your own ability to implement the changes. SSA is not
restricted by petty limitations such as my other toy project, [Microfetch] and
is always open to new features.

## License

SSA is licensed under the [MIT License](LICENSE). See the license file for more
details.
